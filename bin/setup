#!/bin/bash

### Sets up the Ansible environment
# Performs the following actions:
#   - runs 'setup-venv' to set up Python venv with dependencies
#   - runs 'setup-galaxy' to download Ansible collections and roles using Ansible Galaxy
#     and to install PIP dependencies required by them
#   - runs 'generate-vault-password' to generate a password for Ansible Vault
# This script passes the first command-line argument to 'setup-venv'
# to specify the setup mode.


## Define the 'bin' directory
BIN="$(dirname "$(readlink -f "$0")")"


## Set up the Ansible environment

# set up Python venv with dependencies
"$BIN/setup-venv" "$1"

# download Ansible collections and roles using Ansible Galaxy
# and install PIP dependencies required by them
"$BIN/setup-galaxy"

# generate a password for Ansible Vault
"$BIN/generate-vault-password"
